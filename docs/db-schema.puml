@startuml
object Recipe  {
    <#F1F1F1,#F1F1F1>|= |= |= |
    | id |  uuid | **PK** |
    | name | varchar(20) |
    | cuisine_type_id | uuid | **FK** |
}

object RecipeInstructionStep {
    <#F1F1F1,#F1F1F1>|= |= |= |
    | id | uuid | **PK** |
    | instruction | varchar(100) |
    | timer | integer |
    | recipie_id | uuid | **FK** |
}

note top of RecipeInstructionStep
    Not sure if we need this table. Perhaps
    `Recipie` entity should store instructions
    as JSON?
end note

object RecipeIngredient {
  <#F1F1F1,#F1F1F1>|= |= |= |
    | id |  uuid | **PK** |
    | name | varchar(20) |
    | quantity | integer |
    | unit | varchar(20) |
    | food_item_id | uuid| **FK** |
    | recipie_id | uuid | **FK** |
}

note bottom of RecipeIngredient
    Perhaps we should mark some
    ingredients as "special" and
    "common" to show that they are
    really common or really rare?

    Eg. Oil or salt are really common
    ingredients, but sychuan pepper
    or thai basil aren't.
end note

object Ingredient {
  <#F1F1F1,#F1F1F1>|= |= |= |
    | id |  uuid | **PK** |
    | name | varchar(20) |
    | food_item_category_id | uuid | **FK** |
}

object IngredientCategory {
  <#F1F1F1,#F1F1F1>|= |= |= |
    | id |  uuid | **PK** |
    | name | varchar(20) |
}

note right of IngredientCategory
    Not sure if we need this table. Perhaps
    `Ingredient` entity should store category
    as column?
end note

object CuisineType {
    <#F1F1F1,#F1F1F1>|= |= |= |
    | id |  uuid | **PK** |
    | name | varchar(20) |
}

note top of CuisineType
    Not sure if we need this table. Perhaps
    `Recipie` entity should store cuisine type
    as column? Or maybe it should be defined
    as `RecipeCategory`?
end note

object RecipeCategory {
    <#F1F1F1,#F1F1F1>|= |= |= |
    | id |  uuid | **PK** |
    | name | varchar(20) |
}

object Recipe_RecipeCategory {
    <#F1F1F1,#F1F1F1>|= |= |= |
    | recipe_id | uuid | **PK FK** |
    | recipe_category_id | uuid | **PK FK** |
}

object User {
    <#F1F1F1,#F1F1F1>|= |= |= |
    | id |  uuid | **PK** |
}

object UserFavouriteRecipe {
    <#F1F1F1,#F1F1F1>|= |= |= |
    | user_id |  uuid | **PK FK** |
    | dish_id |  uuid | **PK FK** |
}

object Review {
    <#F1F1F1,#F1F1F1>|= |= |= |
    | user_id | uuid | **PK FK** |
    | dish_id | uuid | **PK FK** |
    | created_at | timestamp | |
    | review_value | integer | |
}

object ShoppingList {
    <#F1F1F1,#F1F1F1>|= |= |= |
    | id | uuid | **PK** |
    | user_id | uuid | **FK** |
    | food_item_id | uuid | **FK** |
    | quantity | decimal | |
    | unit | varchar(20) | |
    | completed | boolean | |
}

Recipe -down-{ RecipeIngredient
RecipeInstructionStep }-- Recipe
RecipeIngredient }-right- Ingredient
Ingredient }-- IngredientCategory
Recipe }-up- CuisineType
Recipe -left-{ Recipe_RecipeCategory
Recipe_RecipeCategory }-up- RecipeCategory
Recipe -right-{ UserFavouriteRecipe
UserFavouriteRecipe }-right- User
Recipe -up-{ Review
Review }-down- User
User -- ShoppingList
ShoppingList -left-{ Ingredient
@enduml